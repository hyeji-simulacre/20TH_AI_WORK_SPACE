# 구글 드라이브 API 연동 가이드

이 문서는 AI 에이전트가 내 구글 드라이브에 접근할 수 있도록 권한을 설정하는 과정을 다룹니다.

---

## 1단계: 구글 클라우드 시작하기

1. 웹 브라우저를 켭니다. (크롬 권장)
2. **[Google Cloud Console](https://console.cloud.google.com/)** 에 접속합니다.
3. 구글 계정으로 로그인합니다.
4. **약관 동의** 화면이 나오면 **"동의 및 계속하기"**를 체크하고 넘어갑니다.

---

## 2단계: 프로젝트 만들기

1. 화면 왼쪽 상단 **[프로젝트 선택]**을 클릭합니다.
2. 팝업창에서 **[새 프로젝트]** 버튼을 클릭합니다.
3. **프로젝트 이름**에 `My AI Project`라고 입력합니다.
4. **[만들기]** 버튼을 클릭합니다.
5. 완료되면 **[프로젝트 선택]**을 눌러 방금 만든 프로젝트를 선택합니다.

---

## 3단계: 구글 드라이브 API 활성화

1. 왼쪽 위 **햄버거 버튼(☰)** 클릭
2. **API 및 서비스** > **사용 설정된 API 및 서비스** 클릭
3. **[+ API 및 서비스 사용 설정]** 버튼 클릭
4. 검색창에 `Google Drive` 입력 후 엔터
5. **Google Drive API** 클릭
6. **[사용]** 버튼 클릭

---

## 4단계: OAuth 동의 화면 설정

1. 왼쪽 메뉴(☰) > **API 및 서비스** > **OAuth 동의 화면** 클릭
2. **User Type**: **외부 (External)** 선택 후 **[만들기]** 클릭
3. **앱 정보 입력**:
   - **앱 이름**: `Desktop Agent`
   - **사용자 지원 이메일**: 본인 이메일 선택
   - **개발자 연락처 정보**: 본인 이메일 입력
   - **[저장 후 계속]** 클릭
4. **범위(Scopes)**: 아무것도 하지 말고 **[저장 후 계속]** 클릭
5. **테스트 사용자**: **[+ ADD USERS]** 클릭 후 본인 이메일 입력 > **[추가]** > **[저장 후 계속]** 클릭
6. **[대시보드로 돌아가기]** 클릭

---

## 5단계: 자격증명(credentials.json) 발급

1. 왼쪽 메뉴(☰) > **API 및 서비스** > **자격 증명** 클릭
2. **[+ 자격 증명 만들기]** > **OAuth 클라이언트 ID** 선택
3. **애플리케이션 유형**: **데스크톱 앱** 선택
4. **[만들기]** 버튼 클릭
5. 팝업에서 **JSON 다운로드** 클릭

---

## 6단계: 파일 설정 및 인증

1. 다운로드한 파일을 **`credentials.json`**으로 이름 변경
2. 파일을 아무 곳에나 저장 (Downloads, Desktop, 워크스페이스 등)
3. 터미널에서 인증 스크립트 실행:

```bash
python .claude/skills/gdrive-down-lv2/scripts/gdrive_auth.py
```

4. **credentials.json 위치 선택** (자동 검색됨):
```
🔍 credentials.json 파일을 찾고 있습니다...

발견된 파일 (2개):
  1. ~/Downloads/credentials.json
  2. ~/Desktop/credentials.json
  3. 직접 경로 입력

번호 선택: 1
.env 파일에 경로를 저장할까요? (y/n): y
```

5. 브라우저에서 로그인 후 권한 허용
   - **"고급"** 클릭 > **"Desktop Agent(으)로 이동"** 클릭 > **[허용]** 클릭
6. 터미널에 `[OK] 토큰 저장 완료` 메시지 확인

---

## 7단계: .gitignore 설정

`.gitignore` 파일에 다음 내용 추가:

```text
credentials.json
token.json
```

---

## 8단계: 환경 변수 설정 (선택)

> **참고**: 6단계에서 `.env 파일에 저장`을 선택했다면, 경로 설정은 이미 완료되었습니다.

1. 구글 드라이브(웹)에서 업로드용 폴더 생성 (예: `AI_Agent_Upload`)
2. 폴더 주소에서 **폴더 ID** 복사 (`folders/` 뒤의 문자열)
3. `.env` 파일에 폴더 ID 추가:

```env
GDRIVE_UPLOAD_DEFAULT_FOLDER_ID=여기에_복사한_폴더ID_붙여넣기
```

---

설정 완료! 👏