# 41. PKM 시맨틱 검색 - 나를 위한 AI '세 번째 뇌' 가동

> **"Google File Search를 활용한 지식관리 확장"**

## 1. 🎯 개념 및 필요성 (Concept)

### 🧐 이게 뭐죠?
**시맨틱 검색**은 키워드 일치가 아닌, **의미 기반 검색**입니다. "AI 활용 방법"을 검색하면 "인공지능 서비스 아이디어", "머신러닝 적용 사례" 등 관련 노트도 함께 찾아줍니다.

### 💡 왜 배워야 하죠?
- **의미 검색**: 정확한 단어를 몰라도 찾을 수 있습니다
- **연관 발견**: 내가 잊고 있던 관련 자료가 나타납니다
- **AI 파트너**: Claude가 내 자료를 기반으로 답변합니다

---

## 2. 🔧 작동 원리

### 키워드 검색 vs 시맨틱 검색

| 구분 | 키워드 검색 | 시맨틱 검색 |
|------|------------|------------|
| **방식** | 정확한 단어 일치 | 의미 유사도 비교 |
| **예시** | "AI" 검색 → "AI" 포함 문서만 | "AI" 검색 → "인공지능", "머신러닝" 문서도 |
| **한계** | 동의어, 유사어 못 찾음 | 약간의 처리 시간 필요 |

### 벡터 임베딩이란?

텍스트를 **숫자 벡터(좌표)** 로 변환하는 기술입니다.

```
"AI 서비스 기획" → [0.23, -0.15, 0.87, ...]  (수백 개 숫자)
"인공지능 앱 아이디어" → [0.21, -0.12, 0.85, ...]  (비슷한 좌표!)
```

의미가 비슷한 문장은 **비슷한 좌표**에 위치합니다. 검색 시 질문을 벡터로 변환하고, 가장 가까운 좌표에 있는 문서를 찾아줍니다.

### Google File Search API

Google Gemini의 **File Search** 기능을 활용합니다:

1. **파일 업로드**: 마크다운 파일을 Gemini에 업로드
2. **자동 인덱싱**: Gemini가 내부적으로 벡터 임베딩 생성
3. **검색 API**: 자연어 질문 → 관련 파일 + 답변 반환

> 💡 직접 벡터 DB를 구축할 필요 없이, Google이 제공하는 인프라를 그대로 활용합니다.

### 전체 흐름

```
[내 노트들] → [Gemini에 업로드] → [자동 벡터화] → [시맨틱 검색 가능]
     ↑                                              ↓
  sync.py 실행                              query.py로 검색
```

---

## 3. 🚀 이용 방법 (How-to)

### 검색 트리거
설정 완료 후, 자연어로 검색하면 됩니다:

```
"AI 서비스 아이디어 찾아줘"
"지난달에 정리한 마케팅 자료 뭐였지?"
"프로젝트 기획서 검색해줘"
"전에 정리한 ~ 어디있어?"
```

### 스킬 위치
`.claude/skills/pkm-search/` 폴더에 설정 파일이 있습니다.

---

## 4. ⚙️ 설정 방법

### 1단계: API 키 발급
1. [Google AI Studio](https://aistudio.google.com/) 접속
2. Google 계정으로 로그인
3. "Get API Key" → "Create API Key"
4. 생성된 API 키 복사

### 2단계: 환경 변수 설정
```bash
# macOS/Linux
export GEMINI_API_KEY='your-api-key-here'

# 영구 설정
echo 'export GEMINI_API_KEY="your-api-key-here"' >> ~/.zshrc
source ~/.zshrc
```

### 3단계: 초기화
```bash
cd .claude/skills/pkm-search
python3 init.py
```

### 4단계: 파일 동기화
```bash
python3 sync.py
```

### 5단계: 테스트
```bash
python3 query.py "테스트 검색어"
```

---

## 5. 💼 직무별 활용 사례 (Use Case)

### 👩‍💼 기획자 A씨 - "과거 기획서 재활용"
- **상황**: 비슷한 프로젝트 했던 것 같은데 기억이 안 남
- **전**: 폴더 뒤지기 30분
- **후**: "작년 앱 리뉴얼 기획서 찾아줘" → **즉시 발견**

### 📊 마케터 B씨 - "캠페인 인사이트 발굴"
- **상황**: 새 캠페인 기획 중, 과거 성과 자료 필요
- **후**: "성공한 SNS 캠페인 사례 검색" → 관련 보고서 3개 발견

### 🧑‍💻 개발자 C씨 - "기술 스택 결정"
- **상황**: 예전에 조사했던 기술 비교 자료 필요
- **후**: "React vs Vue 비교" → 6개월 전 정리해둔 노트 발견

---

## 6. 🍯 꿀팁

### 검색 품질 높이기
- 노트에 **태그**를 달아두면 검색 정확도 상승
- **제목**을 명확하게 작성하면 더 잘 찾음
- 정기적으로 `sync.py` 실행하여 새 노트 반영

### 동기화 전략: 매일 조금씩

> ⚠️ **중요**: 노트가 많으면 한 번에 동기화하기 부담됩니다.

**권장 방법**: 매일 퇴근 전 5분, 동기화 습관 들이기

```bash
# 매일 실행 (새 노트만 추가됨)
python3 sync.py
```

| 방식 | 장점 | 단점 |
|------|------|------|
| **한 번에 전체** | 설정 1회로 끝 | 시간 오래 걸림, API 한도 주의 |
| **매일 조금씩** | 부담 없음, 안정적 | 습관 필요 |

**자동화 팁** (고급):
- macOS: `crontab`으로 매일 자동 실행
- Windows: 작업 스케줄러 활용

### 비용
- Google AI Studio **무료 티어** 제공
- 일반 개인 사용에는 충분한 용량
- 대량 동기화 시 일일 한도 확인 필요

---

## 7. 📊 검색 우선순위

폴더 구조가 그대로 검색 우선순위가 됩니다:

| 우선순위 | 폴더 | 이유 |
|---------|------|------|
| 1 | `10-working/` | 현재 작업 중인 것 |
| 2 | `20-created/` | 내가 만든 지식 |
| 3 | `30-collected/` | 수집한 자료 |
| 4 | `50-periodic/` | 일일/주간 기록 |
| 5 | `40-archive/` | 과거 자료 |

---

**📌 다음 단계**: 이제 노트 간 **자동 연결** (제텔카스텐)을 배워봅시다!
